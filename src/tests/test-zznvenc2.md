# `test-zznvenc2.cpp` 作用及執行流程

`test-zznvenc2.cpp` 程式使用 `qcap2` 函式庫展示了一個簡單的 GPU 加速影像處理管線。

**注意：儘管檔案名稱包含 "nvenc"，此測試程式並未執行任何影像編碼 (NVENC) 操作。** 其主要功能是影像的縮放、色彩空間轉換與顯示。

## 執行流程

1.  **模擬影像來源**：測試首先建立一個模擬的 30 FPS 影像來源。它重複使用從 `vsrc.jpg` 載入的圖片作為來源影格。這些影格為 `NV12` 格式 (1920x1080)，並儲存在 GPU 可存取的 CUDA 主機記憶體中。

2.  **GPU 加速縮放**：程式建立一個 `qcap2_video_scaler`，並將其設定為使用 **NPP (NVIDIA Performance Primitives)** 後端。這意味著所有的縮放和色彩空間轉換操作都將在 GPU 上執行。此縮放器被設定為將傳入的 `NV12` 影格轉換為 `I420` 格式。

3.  **影像接收器 (顯示)**：設定一個影像接收器 (video sink)，用於在螢幕上的 X11 視窗中渲染最終的影像影格。顯示視窗的解析度為 1280x720。

4.  **管線處理**：對於來自模擬來源的每一個影格，會發生以下步驟：
    a. 從佇列中取出來源的 `NV12` 影格。
    b. 將其推送到基於 NPP 的影像縮放器中。
    c. 縮放器在 GPU 上將其轉換為 1920x1080 的 `I420` 影格。
    d. 從縮放器中取出轉換後的 `I420` 影格。
    e. 將影格推送到影像接收器，由其顯示在視窗中。

總體而言，此測試讀取一個模擬的 `NV12` 串流，使用 GPU 將其轉換為 `I420`，並顯示最終結果。
